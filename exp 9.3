import express from "express";
import cors from "cors";
const app = express();
app.use(cors());
app.get("/", (req, res) => res.send("Backend running on EC2 instance"));
app.listen(5000, () => console.log("Backend running on port 5000"));


import React, { useEffect, useState } from "react";
export default function App() {
  const [data, setData] = useState("");
  useEffect(() => {
    fetch("http://<ALB-DNS-Name>:5000").then(res => res.text()).then(setData);
  }, []);
  return (
    <div style={{ textAlign: "center", marginTop: "20%" }}>
      <h1>React Frontend on AWS</h1>
      <p>{data}</p>
    </div>
  );
}


FROM node:18 AS build
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build
FROM nginx:stable-alpine
COPY --from=build /app/build /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]


FROM node:18
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 5000
CMD ["node", "server.js"]
